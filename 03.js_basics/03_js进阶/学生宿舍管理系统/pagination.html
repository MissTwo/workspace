<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
          integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
</head>
<body>
<table>
    <thead>
    <tr>
        <th><input id="select-all" type="checkbox"></th>
        <th>序号</th>
        <th>姓名</th>
        <th>性别</th>
        <th>电话</th>
        <th>宿舍楼</th>
        <th>用户名</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>

    </tbody>
</table>



</body>
<script src="./js/jquery-3.5.1.js"></script>
<script>
    let data = [
        {
            'id': 1,
            'name': '尹秀英',
            'gender': '男',
            'phoneNumber': '14807056888',
            'dormitory': '第四宿舍楼',
            'username': "bobkyp"
        },
        {'id': 2, 'name': '钱超', 'gender': '男', 'phoneNumber': '14413256876', 'dormitory': '第三宿舍楼', 'username': "uwin"},
        {
            'id': 3,
            'name': '王霞',
            'gender': '女',
            'phoneNumber': '15276474434',
            'dormitory': '第五宿舍楼',
            'username': "ztkoqe"
        },
        {'id': 4, 'name': '赵娜', 'gender': '女', 'phoneNumber': '10271711025', 'dormitory': '第四宿舍楼', 'username': "zenn"},
        {'id': 5, 'name': '薛静', 'gender': '女', 'phoneNumber': '11378142619', 'dormitory': '第三宿舍楼', 'username': "csgiu"},
        {
            'id': 6,
            'name': '董秀兰',
            'gender': '男',
            'phoneNumber': '12643546018',
            'dormitory': '第三宿舍楼',
            'username': "opgrcup"
        },
        {
            'id': 7,
            'name': '朱明',
            'gender': '女',
            'phoneNumber': '18524782789',
            'dormitory': '第二宿舍楼',
            'username': "yrdniww"
        },
        {'id': 8, 'name': '王娜', 'gender': '男', 'phoneNumber': '13524425130', 'dormitory': '第五宿舍楼', 'username': "xtiyh"},
        {
            'id': 9,
            'name': '钱涛',
            'gender': '女',
            'phoneNumber': '16125052156',
            'dormitory': '第一宿舍楼',
            'username': "zqejfka"
        },
        {
            'id': 10,
            'name': '赵勇',
            'gender': '男',
            'phoneNumber': '14525182134',
            'dormitory': '第二宿舍楼',
            'username': "gloldg"
        }
    ]

    function redrawDormAdminTable(elementNode, data) {
        elementNode.empty()
        data.forEach(item => {
            elementNode.append(
                `<tr id='row${item.id}'>
                <td><input type="checkbox" value="${item.id}"></td>
                <td>${item.id}</td>
                <td>${item.name}</td>,
                <td>${item.gender}</td>
                <td>${item.phoneNumber}</td>
                <td>${item.dormitory}</td>
                <td>${item.username}</td>
                <td>
                    <input type="button" value="编辑" onclick="editRow(this)">
                    <input type="button" value="删除" onclick="deleteRow(this)">
                </td>
            </tr>`)
        })
    }

    redrawDormAdminTable($('tbody'), data)


    let pageSize
    let limit = 5
    let currentPage = 1

    // 绘制分页
    /**
     *
     * @param elementNode 挂载的父节点
     * @param currentPage   当前页面
     * @param limit 每一页展示的数据范围
     * @param data  数据的总数
     */
    drawPagination(currentPage, limit, data)

    function drawPagination(currentPage, limit, data) {
        // 清空分页页码
        $('.previous-page').nextUntil($('.next-page'), "li").remove()
        // 当前展示的数据
        pageSize = Math.ceil(data.length / limit)
        for (let i = 1; i <= pageSize; i++) {
            $('.next-page').before(`<li id='pages${i}'><a href="#" onClick="jumpTo(${i})">${i}</a></li>`)
        }
        // 当前的数据
        let current = data.slice((currentPage - 1) * limit, currentPage * limit)
        redrawDormAdminTable($('tbody'), current)
    }

    // 跳转那一页
    function jumpTo(m) {
        currentPage = m
        drawPagination(currentPage, limit, data)
    }

    // 上一页
    function jumpToPrev() {
        if (currentPage === 1) return
        jumpTo(currentPage - 1)
    }

    // 下一页
    function jumpToNext() {
        if (currentPage === pageSize) return
        jumpTo(currentPage + 1)
    }

    // 数量范围
    $('#limit').change(function () {
        limit = $('#limit').val()
        drawPagination(currentPage, limit, data)
    })
    // 数据数量展示
    $('#data-num').text(data.length)

</script>
</html>