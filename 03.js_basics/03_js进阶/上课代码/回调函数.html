<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    let arr = [1, 2, 3, 4, 5]
    // 方法一：
    function foreach(arr, callback) {
        for (let i = 0; i < arr.length; i++) {
            callback.call(null,arr[i], i, arr);
        }
    }

    foreach(arr, function (item, index, array) {
        console.log(item, index, array)
    })
    console.log("-----------------------------")
    // 方法二：
    Array.prototype.myForEach = function (callback) {
        for (let i = 0; i < this.length; i++) {
            callback.call(null,this[i], i, this)
        }
    }
    arr.myForEach(function (item, index, array) {
        console.log(item, index, array)
    })
    console.log("-----------filter-------------")
    // 过滤filter
    Array.prototype.myFilter= function (callback){
        let newArr=[]
        for (let i = 0; i< this.length; i++){
            if(callback.call(null,this[i], i, this))newArr.push(this[i])
        }
        return newArr
    }
    let a=arr.myFilter(function(item, index, array){
        return item>3
    })
    console.log(a)
    console.log("-----------some-------------")
    //some
    Array.prototype.mySome= function (callback){
        for (let i = 0; i< this.length; i++){
            if(callback.call(null,this[i], i, this))return true
        }
        return  false
    }
    let b=arr.mySome(function(item, index, array){
        return item>4
    })
    console.log(b)
    console.log("------------every------------")
    //every
    Array.prototype.myEvery= function (callback){
        for (let i = 0; i< this.length; i++){
            if(!callback.call(null,this[i], i, this))return false
        }
        return  true
    }
    let c=arr.myEvery(function(item, index, array){
        return item<6
    })
    console.log(c)
    console.log("-----------map-------------")
    //map
    Array.prototype.myMap= function (callback){
        let newArr=[]
        for (let i = 0; i< this.length; i++){
            newArr.push(callback.call(null,this[i], i, this))
        }
        return newArr
    }
    let d=arr.myMap(function(item, index, array){
        return item*2
    })
    console.log(d)

    console.log("-----------reduce-------------")
    //reduce
    Array.prototype.myReduce= function (callback,initialValue){
        // cur第一次，如果没有传initValue，那么pre就是第一个元素，cur就是第二个元素
        // 如果传了initValue参数，那么cur就是第一个元素
        let pre=this[0],cur,start=0;

            if (initialValue==undefined){
                for (let i = 0; i < this.length; i++)
            }
            let res=callback.call(null,this[i], i, this)
            newArr.push(res)



        // if (initValue === undefined || initValue === null ) {
        if (initValue == null) {
            // 没有传initValue
            start = 1;
        } else {
            pre = initValue;
        }
        for (let i = start; i < this.length; i++) {
            cur = this[i];
            pre = callback.call(null, pre, cur, i, this);
        }

        return pre;

    }
    let g=arr.myReduce(function(item, index, array){
        return item*2
    })
    console.log(g)

    console.log("------------find------------")
    //find
    Array.prototype.myFind= function (callback){
        for (let i = 0; i< this.length; i++){
            if(callback.call(null,this[i], i, this))return this[i];
        }

    }
    let e=arr.myFind(function(item, index, array){
        return item==5
    })
    console.log(e)
    console.log("-----------findIndex-------------")
    //findIndex
    Array.prototype.myFindIndex= function (callback){
        for (let i = 0; i< this.length; i++){
            if(callback.call(null,this[i], i, this))return i
        }

    }
    let f=arr.myFindIndex(function(item, index, array){
        return item==1
    })
    console.log(f)
</script>

</body>
</html>